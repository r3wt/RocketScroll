/**
 * @package RocketScroll
 * @author Garrett Morris <gmorris_89@outlook.com>
 * @license MIT
 * @version 1.0.0
 *
 * THIS PROJECT is a fork of RocketScroll by Stanko https://github.com/Stanko/rocketScroll/
 */
!function(t,e){function n(){if("undefined"!=typeof pageYOffset)return pageYOffset;var t=e.body,n=e.documentElement;return n=n.clientHeight?n:t,n.scrollTop}function i(t){for(var e=t.target?t.target:t.srcElement,i=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)i+=e.offsetTop-e.scrollTop,e=e.offsetParent;return i=t.clientY+n()-i}function s(e){e?t.document.onselectstart=h:(h=t.document.onselectstart,t.document.onselectstart=function(){return!1})}function o(t){var n=e.querySelectorAll(t);return 1===n.length?n[0]:n}function l(t,e){c={};for(var n in t)c[n]=t[n],e.hasOwnProperty(n)&&(c[n]=e[n]);return c}function r(t,n){if(!("ontouchstart"in e.documentElement)){if(n instanceof Object||(n={}),this.options=l(u,n),t instanceof HTMLElement?this.el=t:this.el=o(t),this.el instanceof NodeList){this.elements=[];for(var i=0;i<this.el.length;i++)this.elements.push(new r(this.el.item(i),!0));return void(this.multiple=!0)}this.multiple=!1,this.el.id||(this.el.id="rs-"+a++),this.el.classList.add("rs"),this.mouseDown=!1;var s=(this.el.innerHTML,'<div class="rs-container"><div class="rs-content">{{html}}</div></div><div class="rs-scrollbar rs-unselectable"><div class="rs-handle rs-unselectable"></div>');this.options.wrapContents&&(this.el.innerHTML=s.replace("{{html}}",this.el.innerHTML)),this.container=o("#"+this.el.id+" .rs-container"),this.content=o("#"+this.el.id+" .rs-content"),this.scrollbar=o("#"+this.el.id+" .rs-scrollbar"),this.handle=o("#"+this.el.id+" .rs-handle"),this.refresh(),this.bindEvents(),this.SELECTION_TIMEOUT=!1}}var h=!1,a=0,u={wrapContents:!0},f={bindEvents:function(){var t=this;this.container.onscroll=function(){t.handle.style.marginTop=t.ratio*this.scrollTop+"px"},this.handle.onclick=function(t){t.stopPropagation()},this.handle.onmousedown=function(e){e.stopPropagation(),t.content.classList.add("rs-unselectable"),s(!1),t.clientY=e.clientY,t.scrollTop=t.container.scrollTop,t.mouseDown=!0},this.el.onmouseup=function(){t.setMouseUpAndEnableSelection(t)},this.el.onmouseleave=function(){t.setMouseUpAndEnableSelection(t)},this.el.onmousemove=function(e){t.mouseDown&&(t.container.scrollTop=(e.clientY-t.clientY)/t.ratio+t.scrollTop)},this.scrollbar.onclick=function(e){e.stopPropagation(e);var n=i(e)-t.handle.clientHeight/2;t.container.scrollTop=n/t.totalHandle*t.totalScrollable},this.el.onscroll=function(e){e.preventDefault(),t.el.scrollLeft=0};var e=new MutationObserver(function(){t.refresh()});e.observe(this.el,{childList:!0,subtree:!0,attributes:!1,characterData:!1})},setMouseUpAndEnableSelection:function(t){t.content.classList.remove("rs-unselectable"),t.mouseDown=!1,clearTimeout(t.SELECTION_TIMEOUT),t.SELECTION_TIMEOUT=setTimeout(function(){s(!0)},500)},setWidth:function(){this.container.style.width=this.el.clientWidth+50+"px",this.content.style.width=this.el.clientWidth+"px"},refresh:function(){var t;if(this.multiple)for(t in this.elements)this.elements[t].refresh();else this.container.clientHeight>this.content.clientHeight?this.scrollbar.style.display="none":this.scrollbar.style.display="block",this.handle.style.height=this.container.clientHeight*(this.container.clientHeight/this.content.clientHeight)+"px",this.totalScrollable=this.content.clientHeight-this.container.clientHeight,this.totalHandle=this.scrollbar.clientHeight-this.handle.clientHeight,this.ratio=this.totalHandle/this.totalScrollable,this.handle.style.marginTop=this.ratio*this.container.scrollTop+"px",this.setWidth(),this.refreshImages()},refreshImages:function(){var t,e,n;if(t=o("#"+this.el.id+" .rs-content img"),t.length>0)for(e=this,n=0;n<t.length;n++)t.item(n).onload=function(){e.refresh(),this.onload=null}}};r.prototype=f,t.RocketScroll=r}(window,document);