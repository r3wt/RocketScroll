/**
 * @package RocketScroll
 * @author Garrett Morris <gmorris_89@outlook.com>
 * @license MIT
 * @version 1.0.0
 *
 * THIS PROJECT is a fork of RocketScroll by Stanko https://github.com/Stanko/rocketScroll/
 */
!function(t,e){function n(){if("undefined"!=typeof pageYOffset)return pageYOffset;var t=e.body,n=e.documentElement;return n=n.clientHeight?n:t,n.scrollTop}function o(t){for(var e=t.target?t.target:t.srcElement,o=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)o+=e.offsetTop-e.scrollTop,e=e.offsetParent;return o=t.clientY+n()-o}function i(e){e?t.document.onselectstart=h:(h=t.document.onselectstart,t.document.onselectstart=function(){return!1})}function s(t,n){var o=(n||e).querySelectorAll(t);return 1===o.length?r[0]:r}function l(t,e){c={};for(var n in t)c[n]=t[n],e.hasOwnProperty(n)&&(c[n]=e[n]);return c}function a(t,n){if("ontouchstart"in e.documentElement)return void console.log("not binding on touch device.");if(this.options=l(u,n||{}),this.el=t,!(this.el instanceof HTMLElement))return void console.warn("invalid argument for element.");this.el.classList.add("rs"),this.mouseDown=!1;var o=(this.el.innerHTML,'<div class="rs-container"><div class="rs-content">{{html}}</div></div><div class="rs-scrollbar rs-unselectable"><div class="rs-handle rs-unselectable"></div>');this.options.wrapContents&&(this.el.innerHTML=o.replace("{{html}}",this.el.innerHTML)),this.init()}var h=!1,u={wrapContents:!0,alwaysShow:!1};a.prototype={init:function(){this.container=s(".rs-container",this.el),this.content=s(".rs-content",this.el),this.scrollbar=s(".rs-scrollbar"),this.handle=s(".rs-handle",this.el),this.bind(),this.refresh()},bind:function(){var t=this;this.container.onscroll=function(){t.handle.style.marginTop=t.ratio*t.container.scrollTop+"px"},this.handle.onclick=function(t){t.stopPropagation()},this.handle.onmousedown=function(e){e.stopPropagation(),t.content.classList.add("rs-unselectable"),i(!1),t.clientY=e.clientY,t.scrollTop=t.container.scrollTop,t.mouseDown=!0},this.el.onmouseup=function(){t.setMouseUpAndEnableSelection(t)},this.el.onmouseleave=function(){t.setMouseUpAndEnableSelection(t)},this.el.onmousemove=function(e){t.mouseDown&&(t.container.scrollTop=(e.clientY-t.clientY)/t.ratio+t.scrollTop)},this.scrollbar.onclick=function(e){e.stopPropagation(e);var n=o(e)-t.handle.clientHeight/2;t.container.scrollTop=n/t.totalHandle*t.totalScrollable},this.el.onscroll=function(e){e.preventDefault(),t.el.scrollLeft=0};var t=this;this.observer=new MutationObserver(function(){t.refresh()}),this.observer.observe(this.content,{childList:!0,subtree:!0,attributes:!0,characterData:!1})},destroy:function(){var t=this;t.observer.disconnect();for(var e=t.el.cloneNode();t.el.firstChild;)e.appendChild(t.el.lastChild);t.el.parentNode.replaceChild(e,t.el),t.el=e,t.el.innerHTML=t.content.innerHTML;for(var n in t)delete t[n]},setMouseUpAndEnableSelection:function(t){t.content.classList.remove("rs-unselectable"),t.mouseDown=!1,clearTimeout(t.SELECTION_TIMEOUT),t.SELECTION_TIMEOUT=setTimeout(function(){i(!0)},500)},refresh:function(){this.container.clientHeight>this.content.clientHeight?this.scrollbar.style.display="none":this.scrollbar.style.display="block",this.handle.style.height=this.container.clientHeight*(this.container.clientHeight/this.content.clientHeight)+"px",this.totalScrollable=this.content.clientHeight-this.container.clientHeight,this.totalHandle=this.scrollbar.clientHeight-this.handle.clientHeight,this.ratio=this.totalHandle/this.totalScrollable,this.handle.style.marginTop=this.ratio*this.container.scrollTop+"px"}},t.RocketScroll=a}(window,document);